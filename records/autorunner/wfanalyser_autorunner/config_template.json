{
  "_version": "1.0.0",
  "_description": "WFA 滾動前向分析配置文件模板",
  "wfa_config": {
    "_help": {
      "mode": "WFA 模式：standard (標準滾動) 或 anchored (固定起點滾動)",
      "train_set_percentage": "訓練集(IS)長度百分比 (0-1)，例如 0.6 表示 60%",
      "test_set_percentage": "測試集(OOS)長度百分比 (0-1)，例如 0.2 表示 20%",
      "step_size": "步長（數據點數），例如 30 表示每次向前移動 30 個數據點",
      "optimization_objectives": "優化目標列表：['sharpe', 'calmar']，會分別計算兩個 WFA",
      "output_csv": "是否導出 CSV 文件：true 導出 CSV 和 Parquet，false 只導出 Parquet"
    },
    "mode": "standard",
    "train_set_percentage": 0.6,
    "test_set_percentage": 0.2,
    "step_size": 216,
    "optimization_objectives": ["sharpe", "calmar"],
    "output_csv": true
  },
  "dataloader": {
    "_help": {
      "source": "數據來源：yfinance | binance | coinbase | file",
      "frequency": "價格頻率，例如 1d、1h",
      "start_date": "資料開始日期 (YYYY-MM-DD)",
      "end_date": "資料結束日期 (YYYY-MM-DD)，可選。如果不設置，將使用當前日期。設置此參數可以固定回測的結束日期，提高結果可重現性",
      "handle_missing_values": "缺失值處理方式：目前僅支援 fill",
      "missing_value_strategy": "缺失值填充策略 (A=前向填充, B,N=前N期均值, C,x=固定值)"
    },
    "source": "binance",
    "frequency": "1d",
    "start_date": "2020-01-01",
    "end_date": null,
    "handle_missing_values": "fill",
    "missing_value_strategy": "A",
    "yfinance_config": {
      "_help": {
        "symbol": "Yahoo Finance 代碼，例如 AAPL",
        "period": "下載區間，例如 1y",
        "interval": "k 線頻率，例如 1d"
      },
      "symbol": "AAPL",
      "period": "1y",
      "interval": "1d"
    },
    "binance_config": {
      "_help": {
        "symbol": "Binance 交易對，例如 BTCUSDT",
        "interval": "k 線頻率，例如 1d"
      },
      "symbol": "BTCUSDT",
      "interval": "1d"
    },
    "coinbase_config": {
      "_help": {
        "symbol": "Coinbase 交易對，例如 BTC-USD"
      },
      "symbol": "BTC-USD"
    },
    "file_config": {
      "_help": {
        "file_path": "本地 CSV/Excel 路徑",
        "time_column": "時間欄位名稱",
        "time_format": "時間格式 (例如 %d/%m/%Y %H:%M:%S，小時:分鐘:秒可不填，留空自動推斷)",
        "open_column": "開盤價欄位名稱",
        "high_column": "最高價欄位名稱",
        "low_column": "最低價欄位名稱",
        "close_column": "收盤價欄位名稱"
      },
      "file_path": "records/dataloader/import/BATS_QQQ, 1D.csv",
      "time_column": "time",
      "time_format": "%Y-%m-%d %H:%M:%S",
      "open_column": "open",
      "high_column": "high",
      "low_column": "low",
      "close_column": "close"
    },
    "predictor_config": {
      "_help": {
        "predictor_source": "預測因子來源：file 等",
        "predictor_path": "預測因子檔案路徑",
        "predictor_column": "需要載入的預測因子欄位",
        "skip_predictor": "是否跳過預測因子載入",
        "time_column": "時間欄位名稱 (例如 timestamp, time, Date)",
        "time_format": "時間格式 (例如 %Y-%m-%d %H:%M:%S 或 %d/%m/%Y %H:%M:%S)。⚠️ 如果是Unix timestamp（純數字如1577750400），請留空讓系統自動檢測轉換！"
      },
      "predictor_source": "file",
      "predictor_path": "records/dataloader/import/predictor_example.xlsx",
      "predictor_column": "X",
      "skip_predictor": true,
      "time_column": "time",
      "time_format": "%Y-%m-%d"
    }
  },
  "backtester": {
    "_help": {
      "selected_predictor": "預測因子欄位，例如 X, factor_name_diff_div, factor_name_diff_sub",
      "condition_pairs": "開倉/平倉指標配對列表",
      "indicator_params": "每個指標的參數範圍。⚠️ 重要：\n- 所有參數都必須使用 range 格式（如 '10:200:20' 表示從 10 到 200，步長 20）\n- 即使只想測試一個數字也必須使用 range 格式（如 '10:10:1' 表示固定值 10）\n- 每個指標最多只能有2個可變參數，其他參數必須為固定值 range（如 '10:10:1'）\n- 如果超過2個可變參數，WFA 將報錯",
      "trading_params.transaction_cost": "交易成本 (手續費)；以比例表示",
      "trading_params.slippage": "滑點；以比例表示",
      "trading_params.trade_delay": "交易延遲 (0=當根，1=下一根)",
      "trading_params.trade_price": "成交價格類型：open / close"
    },
    "selected_predictor": "X",
    "condition_pairs": [
      {
        "entry": ["MA1"],
        "exit": ["MA4"]
      },
      {
        "entry": ["BOLL1"],
        "exit": ["BOLL4"]
      },
      {
        "entry": ["BOLL3"],
        "exit": ["BOLL2"]
      },
      {
        "entry": ["HL1"],
        "exit": ["HL4"]
      },
      {
        "entry": ["PERC1"],
        "exit": ["PERC4"]
      },
      {
        "entry": ["PERC3"],
        "exit": ["PERC2"]
      },
      {
        "entry": ["MA4"],
        "exit": ["MA1"]
      },
      {
        "entry": ["BOLL4"],
        "exit": ["BOLL1"]
      },
      {
        "entry": ["BOLL2"],
        "exit": ["BOLL3"]
      },
      {
        "entry": ["HL4"],
        "exit": ["HL1"]
      },
      {
        "entry": ["PERC4"],
        "exit": ["PERC1"]
      },
      {
        "entry": ["PERC2"],
        "exit": ["PERC3"]
      }
    ],
    "indicator_params": {
      "_help": "指標參數配置。\n⚠️ 重要：\n- 所有參數都必須使用 range 格式（如 '10:200:20' 表示從 10 到 200，步長 20）\n- 即使只想測試一個數字也必須使用 range 格式（如 '10:10:1' 表示固定值 10）\n- 每個指標最多只能有2個可變參數，其他參數必須為固定值 range（如 '10:10:1'）\n- 如果超過2個可變參數，WFA 將報錯",
      "MA1_strategy_1": {
        "ma_type": "SMA",
        "ma_range": "50:150:20"
      },
      "MA4_strategy_1": {
        "ma_type": "SMA",
        "ma_range": "50:150:20"
      },
      "BOLL1_strategy_2": {
        "ma_range": "50:150:20",
        "sd_multi": "2.0"
      },
      "BOLL4_strategy_2": {
        "ma_range": "50:150:20",
        "sd_multi": "2.0"
      },
      "BOLL3_strategy_3": {
        "ma_range": "50:150:20",
        "sd_multi": "2.0"
      },
      "BOLL2_strategy_3": {
        "ma_range": "50:150:20",
        "sd_multi": "2.0"
      },
      "HL1_strategy_4": {
        "n_range": "1:1:1",
        "m_range": "50:150:20"
      },
      "HL4_strategy_4": {
        "n_range": "1:1:1",
        "m_range": "50:150:20"
      },
      "PERC1_strategy_5": {
        "window_range": "50:150:20",
        "percentile_range": "90:90:1"
      },
      "PERC4_strategy_5": {
        "window_range": "50:150:20",
        "percentile_range": "90:90:1"
      },
      "PERC3_strategy_6": {
        "window_range": "50:150:20",
        "percentile_range": "10:10:1"
      },
      "PERC2_strategy_6": {
        "window_range": "50:150:20",
        "percentile_range": "10:10:1"
      },
      "MA4_strategy_7": {
        "ma_type": "SMA",
        "ma_range": "50:150:20"
      },
      "MA1_strategy_7": {
        "ma_type": "SMA",
        "ma_range": "50:150:20"
      },
      "BOLL4_strategy_8": {
        "ma_range": "50:150:20",
        "sd_multi": "2.0"
      },
      "BOLL1_strategy_8": {
        "ma_range": "50:150:20",
        "sd_multi": "2.0"
      },
      "BOLL2_strategy_9": {
        "ma_range": "50:150:20",
        "sd_multi": "2.0"
      },
      "BOLL3_strategy_9": {
        "ma_range": "50:150:20",
        "sd_multi": "2.0"
      },
      "HL4_strategy_10": {
        "n_range": "1:1:1",
        "m_range": "50:150:20"
      },
      "HL1_strategy_10": {
        "n_range": "1:1:1",
        "m_range": "50:150:20"
      },
      "PERC4_strategy_11": {
        "window_range": "50:150:20",
        "percentile_range": "90:90:1"
      },
      "PERC1_strategy_11": {
        "window_range": "50:150:20",
        "percentile_range": "90:90:1"
      },
      "PERC2_strategy_12": {
        "window_range": "50:150:20",
        "percentile_range": "10:10:1"
      },
      "PERC3_strategy_12": {
        "window_range": "50:150:20",
        "percentile_range": "10:10:1"
      }
    },
    "trading_params": {
      "transaction_cost": 0.001,
      "slippage": 0.0005,
      "trade_delay": 0,
      "trade_price": "close"
    },
    "initial_capital": 1000000
  },
  "metricstracker": {
    "_help": {
      "enable_metrics_analysis": "是否啟用指標分析",
      "export_format": "導出格式：csv, excel, json",
      "include_charts": "是否包含圖表"
    },
    "enable_metrics_analysis": true,
    "export_format": "excel",
    "include_charts": false,
    "time_unit": 365,
    "risk_free_rate": 0.04
  }
}

